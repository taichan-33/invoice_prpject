# è«‹æ±‚æ›¸è‡ªå‹•å‡¦ç†ã‚·ã‚¹ãƒ†ãƒ  (Invoice Processing System)

Gmail ã§å—ä¿¡ã—ãŸè«‹æ±‚æ›¸ï¼ˆPDF ãªã©ï¼‰ã‚’è‡ªå‹•æ¤œçŸ¥ã—ã€Cloud Storage ã¸ä¿å­˜ã€BigQuery ã¸å°å¸³è¨˜éŒ²ã‚’è¡Œã†è‡ªå‹•åŒ–ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚

## ðŸš€ æ©Ÿèƒ½æ¦‚è¦

- **è‡ªå‹•æ¤œçŸ¥:** ç‰¹å®šã®æ¡ä»¶ï¼ˆé€ä¿¡è€…ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚„ä»¶åã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼‰ã«åˆè‡´ã™ã‚‹ãƒ¡ãƒ¼ãƒ«ã‚’è‡ªå‹•ãƒ•ãƒƒã‚¯ã€‚
- **ã‚¯ãƒ©ã‚¦ãƒ‰ä¿å­˜:** æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ Google Cloud Storage (GCS) ã«è‡ªå‹•ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ï¼ˆ`YYYY/MM/DD/` ãƒ•ã‚©ãƒ«ãƒ€åˆ†ã‘ï¼‰ã€‚
- **å°å¸³è¨˜éŒ²:** å—ä¿¡æ—¥æ™‚ã€é€ä¿¡è€…ã€ãƒ•ã‚¡ã‚¤ãƒ«åãªã©ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’ BigQuery ã«è‡ªå‹•ã‚¤ãƒ³ã‚µãƒ¼ãƒˆã€‚
- **é‡è¤‡é˜²æ­¢:** èª¤ã£ã¦åŒã˜ãƒ¡ãƒ¼ãƒ«ã‚’ 2 å›žå‡¦ç†ã—ãªã„ãŸã‚ã®ãƒ­ãƒƒã‚¯æ©Ÿæ§‹ï¼†é‡è¤‡ãƒ•ã‚¡ã‚¤ãƒ«ã®é€£ç•ªä¿å­˜æ©Ÿèƒ½ã€‚
- **é€šçŸ¥:** å‡¦ç†å®Œäº†ã‚„ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚ã« Slack ã¸é€šçŸ¥ã€‚
- **ç›£è¦–:** Cloud Run + Pub/Sub ã«ã‚ˆã‚‹ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹æ§‹æˆã§ã€24 æ™‚é–“ 365 æ—¥è‡ªå‹•ç¨¼åƒã€‚

## ðŸ“‚ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½“ç³»

è©³ç´°ãªæ‰‹é †æ›¸ã¯ `docs/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«æ ¼ç´ã•ã‚Œã¦ã„ã¾ã™ã€‚

| ãƒ•ã‚¡ã‚¤ãƒ«å                                                                    | å†…å®¹                                                                     |
| ----------------------------------------------------------------------------- | ------------------------------------------------------------------------ |
| [**gcp_setup_guide.md**](docs/gcp_setup_guide.md)                             | **ã€æœ€åˆã«è¦‹ã‚‹ã€‘** Google Cloud (Cloud Run, Pub/Sub ç­‰) ã®ç’°å¢ƒæ§‹ç¯‰æ‰‹é †ã€‚ |
| [**testing_guide.md**](docs/testing_guide.md)                                 | ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®å®Ÿè¡Œæ–¹æ³•ã¨ä»•æ§˜è§£èª¬ã€‚                                       |
| [**production_verification_guide.md**](docs/production_verification_guide.md) | æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤å¾Œã®å®‰å…¨ãªå‹•ä½œç¢ºèªï¼ˆã‚«ãƒŠãƒªã‚¢ãƒ†ã‚¹ãƒˆï¼‰æ‰‹é †ã€‚                   |
| [**data_extraction_guide.md**](docs/data_extraction_guide.md)                 | è“„ç©ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã®æŠ½å‡ºãƒ»åˆ†æžï¼ˆSQL ãƒ¬ã‚·ãƒ”ï¼‰ã‚„ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ‰‹é †ã€‚           |
| [**technical_details.md**](docs/technical_details.md)                         | è©³ç´°ãªæŠ€è¡“ä»•æ§˜ã€ç’°å¢ƒå¤‰æ•°ä¸€è¦§ãªã©ã€‚                                       |

## ðŸ›  ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ (ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™º)

æ‰‹å…ƒã® PC ã§å‹•ä½œç¢ºèªã‚’ã™ã‚‹æ–¹æ³•ã§ã™ã€‚

### 1. æº–å‚™

```bash
# ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install -r requirements.txt

# ç’°å¢ƒå¤‰æ•°ã®è¨­å®š
cp .env.example .env
# .env ã‚’ç·¨é›†ã—ã¦ GCP ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆID ãªã©ã‚’å…¥åŠ›
```

### 2. å®Ÿè¡Œ (ãƒãƒ¼ãƒªãƒ³ã‚°ãƒ¢ãƒ¼ãƒ‰)

Gmail ã‚’ 60 ç§’ã”ã¨ã«ç›£è¦–ã—ã€å¯¾è±¡ãƒ¡ãƒ¼ãƒ«ãŒã‚ã‚Œã°å‡¦ç†ã—ã¾ã™ã€‚

```bash
python watch_gmail.py
```

### 3. ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

```bash
pytest tests/
```

## ðŸ— ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```mermaid
graph LR
    Gmail[Gmailå—ä¿¡] -->|"Pushé€šçŸ¥"| PubSub[Cloud Pub/Sub]
    PubSub -->|"HTTP POST"| CloudRun[Cloud Run (App)]
    CloudRun -->|"ä¿å­˜"| GCS[Cloud Storage (PDF)]
    CloudRun -->|"è¨˜éŒ²"| BQ[BigQuery (Log)]
    CloudRun -->|"é€šçŸ¥"| Slack[Slack]
```

## License

Private Project
